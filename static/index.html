
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mapa Catemaco</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    body { margin: 0; display: flex; }
    #map { height: 100vh; width: 70vw; }
    #info { width: 30vw; padding: 1em; background: #f8f8f8; font-family: sans-serif; }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="info">
    <h2>Información</h2>
    <div id="details">Pasa el cursor sobre un polígono.</div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Crear el mapa centrado en Catemaco
    const map = L.map('map').setView([18.419, -95.122], 14);

    // Cargar tiles de OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19
    }).addTo(map);

    // Lista de polígonos con su número de sección
    const secciones = [

      {
        id: "0635",
        coords: [[-95.10660441977754,18.41682820506726],[-95.10153742835452,18.412714065291283],[-95.09642171586025,18.419786626803372],[-95.10543511406495,18.42061867375135],[-95.10660441977754,18.41682820506726]]
      },
      {
        id: "0643",
        coords: [[-95.1065341026185,18.416265729252927],[-95.10615084535351,18.41888645629784],[-95.11194341793748,18.419505178174376],[-95.11282588261466,18.416884472211322],[-95.1065341026185,18.416265729252927]]
      },
      {
        id: "0636",
        coords: [[-95.10577458748418,18.420107044333932],[-95.11148471937396,18.42083331182137],[-95.11191918593099,18.419577063421514],[-95.10610560962299,18.418988193825825],[-95.10577458748418,18.420107044333932]]
      },
      {
        id: "0633",
        coords: [[-95.10576346734827,18.420174115072413],[-95.10390044039465,18.42964127366176],[-95.10783066163921,18.43007708938616],[-95.11135254820914,18.42097315370613],[-95.10576346734827,18.420174115072413]]
      }
      ,
      {
        id: "0642",
        coords: [[-95.11290932415653,18.416929495823325],[-95.1117864038011,18.420779447711084],[-95.11586975054875,18.423055479373303],[-95.11497651844746,18.416396791293295],[-95.11290932415653,18.416929495823325]]
      },
      {
        id: "0642",
        coords: [[-95.11367495167157,18.422086958942785],[-95.11155671554646,18.42097315370613],[-95.10961712584128,18.42603364552815],[-95.11148015292085,18.426324195294214],[-95.11137806925244,18.42690529389084],[-95.1128072406141,18.42712320535793],[-95.11367495167157,18.422086958942785]]
      }
      ,
      {
        id: "4905",
        coords: [[-95.10947412799176,18.42624062879004],[-95.10801197036287,18.430248033683426],[-95.10748396899675,18.43032509824735],[-95.10581873391916,18.434216813779315],[-95.10285380317144,18.434062688106707],[-95.10248826376404,18.4369139906738],[-95.11207351933209,18.438146971727946],[-95.11284521363649,18.435411283054066],[-95.11325136853348,18.433176462808987],[-95.11816584278665,18.433792967847992],[-95.11845015121449,18.432097573671527],[-95.11715045554396,18.431904914184614],[-95.11771907239968,18.42986271034853],[-95.11207351933209,18.4288223330298],[-95.11280459814651,18.427319554679272],[-95.11134244051763,18.42716542282423],[-95.11134244051763,18.426394761474697],[-95.10947412799176,18.42624062879004]]
      },
      {
        id: "0641",
        coords: [[-95.11516029654894,18.4166070619345],[-95.11568829791509,18.420422018927923],[-95.11710984005437,18.420344949927085],[-95.11727230201309,18.421500981317138],[-95.11889692160109,18.421462447062353],[-95.11828768925541,18.41652999122479],[-95.11881569062155,18.415412462051464],[-95.11832830474536,18.415296855170993],[-95.11784091886882,18.416375849701055],[-95.11516029654894,18.4166070619345]]
      },
      {
        id: "0640",
        coords: [[-95.11910715453129,18.421417593867503],[-95.12081300509847,18.42191853863325],[-95.12101608254677,18.421340525312687],[-95.12357485839752,18.421995606929087],[-95.12316870350088,18.423344296521023],[-95.12532132445463,18.423768168208568],[-95.12792071579496,18.420801044460816],[-95.1298296438108,18.42049276892803],[-95.12873302558894,18.418912848156054],[-95.12609301875865,18.418758708767],[-95.12329054996965,18.418257754800223],[-95.1197570023662,18.416677813504194],[-95.12052869667059,18.415483214112328],[-95.11898530806218,18.415020786314656],[-95.11845730669604,18.416523672112845],[-95.11910715453129,18.421417593867503]]
      },
      {
        id: "4906",
        coords: [[-95.11260867618013,18.436869141508666],[-95.11561422241743,18.437177387681956],[-95.11801053630946,18.43632970937503],[-95.11967577138702,18.436483833014847],[-95.11951330942831,18.437370041259413],[-95.12239700919648,18.4375241639663],[-95.1237373203566,18.43089676278754],[-95.11784807435072,18.42993345646518],[-95.1173606884742,18.431667403959494],[-95.11866038414472,18.432129787004698],[-95.1182948447373,18.433979306748355],[-95.11342098597372,18.433478397115508],[-95.11260867618013,18.436869141508666]]
      },
      {
        id: "0639",
        coords: [[-95.12369670486663,18.430819698480576],[-95.12528070896505,18.423845235675685],[-95.1229656260522,18.423344296521023],[-95.12329054996965,18.42203414106443],[-95.12101608254677,18.421494662387772],[-95.12077238960887,18.42211120930851],[-95.11906653904134,18.421494662387772],[-95.1199194643253,18.42457737489363],[-95.11922900100045,18.424114971539794],[-95.11890407708262,18.424307639754716],[-95.11947269393835,18.425193910764463],[-95.12016315726319,18.425848977705826],[-95.11987884883533,18.42704350511646],[-95.12097546705718,18.427698565012463],[-95.12073177411891,18.42839215512322],[-95.11979761785616,18.42781416355868],[-95.11849792218563,18.42977932695318],[-95.12369670486663,18.430819698480576]]
      },
      {
        id: "0638",
        coords: [[-95.11886346159304,18.421533196635366],[-95.11719822651546,18.42164879932551],[-95.11691391808759,18.42049276892803],[-95.11569545339701,18.42049276892803],[-95.11606099280402,18.423228694970334],[-95.11382714087074,18.422149743417933],[-95.1124462142214,18.428816014369445],[-95.11837607571687,18.429740794553197],[-95.11951330942831,18.42785269638965],[-95.12065054313973,18.428122425968326],[-95.12077238960887,18.42781416355868],[-95.1197570023662,18.42731323596368],[-95.1199194643253,18.425926044240526],[-95.11914777002089,18.425348044387206],[-95.11882284610346,18.42419203885153],[-95.11918838551047,18.42388376939664],[-95.11963515589706,18.42419203885153],[-95.11886346159304,18.421533196635366]]
      },
      {
        id: "0634",
        coords: [[-95.10464740497471,18.42128986026087],[-95.09633100582936,18.4203260469787],[-95.0922967680381,18.422258458778757],[-95.0929140523457,18.426491828227924],[-95.0888204386471,18.428018129378316],[-95.07990566349763,18.435137433960108],[-95.08133964442546,18.440716330309726],[-95.0797123634183,18.444947137659128],[-95.08176431831389,18.44763780920337],[-95.09280521388469,18.451466472602036],[-95.10158263608052,18.452599342921275],[-95.10424431447298,18.45507700268901],[-95.10325946547067,18.460805092101737],[-95.10692527446885,18.461359283772325],[-95.1085881733056,18.466670164531138],[-95.10409827913024,18.493496438650098],[-95.1217267008625,18.49760403520355],[-95.15533050074554,18.486751202558438],[-95.15118888775699,18.47386551336723],[-95.13571875906877,18.462683655750737],[-95.13283679598135,18.43975762455031],[-95.13569291818628,18.435251362072478],[-95.13650917473697,18.430096747335085],[-95.1360811940407,18.422293818587605],[-95.12970263449465,18.420680701465884],[-95.12800996475096,18.421060428911858],[-95.12581598841778,18.423800224099367],[-95.12288857267214,18.437866810097688],[-95.11934297744183,18.4376717577901],[-95.11953325157725,18.436639116984836],[-95.11794195930001,18.43654592553912],[-95.1160467301308,18.437394819366006],[-95.11265343563494,18.43730402521382],[-95.11226254405759,18.43852727726859],[-95.10229720906835,18.43710765732736],[-95.10255744026733,18.43381788050985],[-95.10579561010397,18.434007202311932],[-95.10724297928543,18.43042325278053],[-95.10358782992499,18.429953674446082],[-95.10464740497471,18.42128986026087]]
      },
      {
        id: "0649",
        coords: [[-95.02026979919496,18.409913237744163],[-95.01168524952897,18.40980257614885],[-94.98910316906438,18.411545025027294],[-94.96400050954904,18.4120549125673],[-94.95155547207234,18.41289604944265],[-94.89750611561942,18.40103589258807],[-94.89776390182443,18.40682107452244],[-94.89622426362021,18.412291369379517],[-94.89322197585263,18.416699471324435],[-94.89046269804624,18.423877863238673],[-94.89441328874815,18.428850598438174],[-94.88844634291162,18.43377802683763],[-94.8973690506677,18.435766847499806],[-94.92147190002723,18.42659297798859],[-94.92734752124686,18.428310275955184],[-94.93169291369354,18.43730522443613],[-94.97087043937394,18.444424764648872],[-95.0508903286929,18.474087282922028],[-95.06180452529965,18.4601458267675],[-95.091638634939,18.464417908202734],[-95.09189480817797,18.462063287736314],[-95.09658755497351,18.462692027645105],[-95.0984018676196,18.460975723567174],[-95.10242557430026,18.460107628305053],[-95.10336058496797,18.454962862409246],[-95.10136880265603,18.453250186366702],[-95.09219596518089,18.451971229658113],[-95.08048967141514,18.448316775565743],[-95.08072611923714,18.444867970829037],[-95.02026979919496,18.409913237744163]]
      },
      {
        id: "0648",
        coords: [[-95.10284974314456,18.49337727474],[-95.10814586734313,18.467017985626228],[-95.1064637391653,18.46133598580974],[-95.10302708999845,18.46102503507558],[-95.09887093724822,18.461503975156987],[-95.09702149980366,18.463249781643654],[-95.09238744858244,18.462622089088413],[-95.09235525986634,18.464841465478983],[-95.0910300639632,18.465638648999786],[-95.06226504136461,18.460724530289497],[-95.05981482361989,18.466401547535156],[-95.05234333558842,18.47455102442059],[-95.0483775857282,18.483481805663303],[-95.04604491639132,18.494386321285035],[-95.05009746526594,18.495769979035884],[-95.05096929831228,18.50937535709953],[-95.05148786956168,18.51505437947607],[-95.05923627718475,18.512779473143596],[-95.06039819083841,18.50934940196646],[-95.06822813291804,18.50769313438957],[-95.07222496502806,18.51065148860502],[-95.10284974314456,18.49337727474]]
      },
      {
        id: "0647",
        coords: [[-95.04563623886366,18.4947921879873],[-95.04357845205588,18.493638471980248],[-95.04109168288086,18.49581232947031],[-95.03467211405984,18.495476117765648],[-95.02865690194056,18.49590451610301],[-95.0272033145752,18.498063403077623],[-95.02285797785946,18.50257359674808],[-95.02243319950318,18.509431491993013],[-95.02842300139807,18.509423285346216],[-95.03048032139728,18.51529925005221],[-95.03336851561667,18.520972561882957],[-95.03295171628031,18.52391513011942],[-95.04101938990632,18.520534962308545],[-95.05053695127059,18.51566613361649],[-95.04933492984753,18.496709494365817],[-95.04563623886366,18.4947921879873]]
      },
      {
        id: "0646",
        coords: [[-95.07786190311943,18.508084666269852],[-95.07267669781098,18.51188548921938],[-95.06727366484884,18.508792183583765],[-95.06014823275164,18.510775065912313],[-95.058874855386,18.51352150089265],[-95.0493716117407,18.516914671988175],[-95.03102699859164,18.525471335195235],[-95.00964413416544,18.5359075600433],[-95.01381578984409,18.54358676163956],[-95.01660383944917,18.55240249997651],[-95.02237982701585,18.551047851936133],[-95.0268012403302,18.550571514451732],[-95.03257059088915,18.550761955340008],[-95.03769003947527,18.551366965423966],[-95.04817328032682,18.5500152938277],[-95.06059304980722,18.55072204562505],[-95.06862958419124,18.55128283372794],[-95.07836978332969,18.552486406003553],[-95.0841780296581,18.551137261228405],[-95.0917959171894,18.55010294607034],[-95.0995373465483,18.550623856567142],[-95.10479157747486,18.54973272174402],[-95.11822145550109,18.547165834250123],[-95.12830459494981,18.54386343009527],[-95.13435995545714,18.53841261138784],[-95.13431560607452,18.53309308744663],[-95.1175538198355,18.530854037562648],[-95.10317963217555,18.535714743667853],[-95.09691916625631,18.531029244820473],[-95.08901748022772,18.52610288133134],[-95.07843741007564,18.51617058437934],[-95.07786190311943,18.508084666269852]]
      },
      {
        id: "0644",
        coords: [[-95.10111707788224,18.550550258799433],[-95.09954644263809,18.550812255930026],[-95.09136970810452,18.550253851628725],[-95.08400078504036,18.55174854689909],[-95.07744755190322,18.553251263054108],[-95.04807612290355,18.550692881591488],[-95.03736731472729,18.551948667265123],[-95.02612741044636,18.551207664456427],[-95.01693216714521,18.552789628380665],[-95.01441034958434,18.55445842038678],[-95.00758185492481,18.555395546753758],[-95.00205011520454,18.55299306236732],[-94.99496500170216,18.554253110358886],[-94.98938088105164,18.55413972970139],[-94.98826599198767,18.55518794116533],[-94.988576168366,18.557075817655743],[-94.99813693045714,18.559702537806658],[-95.00927449243243,18.56345031755032],[-95.04066756366436,18.576234454850393],[-95.05020333434408,18.58386400163262],[-95.05174801793846,18.58929148199489],[-95.05119399640367,18.591094668765365],[-95.04932946058608,18.592013244945292],[-95.04869893035539,18.593622608955343],[-95.05069692926129,18.59574168759633],[-95.0491433673103,18.599383717571143],[-95.08577086503304,18.575256809413347],[-95.08921073306034,18.57518309451268],[-95.09311529088055,18.575350762828606],[-95.10144744733302,18.573162651293018],[-95.10545570713136,18.570883165030565],[-95.10111707788224,18.550550258799433]]
      }


      
    ];

    // Dibujar polígonos y agregar eventos
    secciones.forEach(seccion => {
      const poligono = L.polygon(seccion.coords.map(([lon, lat]) => [lat, lon]), { color: 'blue' }).addTo(map);

      // Cuando el mouse pasa sobre el polígono
      poligono.on('mouseover', () => {
        fetch(`/info/${seccion.id}`)
          .then(res => res.json())
          .then(data => {
            const contenido = data.error ? data.error : `
              <strong>Sección:</strong> ${seccion.id}<br>
              <strong>MC:</strong> ${data.MC}<br>
              <strong>MORENA:</strong> ${data.MORENA}<br>
              <strong>PT:</strong> ${data.PT}<br>
              <strong>PAN :</strong> ${data.PAN}<br>
              <strong>PRI:</strong> ${data.PRI}<br>
              <strong>TOTAL_VOTOS :</strong> ${data.TOTAL_VOTOS}<br>
              <strong>NOMINAL:</strong> ${data.NOMINAL}
            `;
            document.getElementById("details").innerHTML = contenido;
          });
      });
    });
  </script>
</body>
</html>
